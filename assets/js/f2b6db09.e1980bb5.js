"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5032],{6641(e,t,i){i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>g,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"dev-guide/plugin-api/strategy","title":"Strategies","description":"Strategies define how destination directory paths are computed for files.","source":"@site/versioned_docs/version-0.2.0/dev-guide/plugin-api/strategy.md","sourceDirName":"dev-guide/plugin-api","slug":"/dev-guide/plugin-api/strategy","permalink":"/FolderFlow/0.2.0/dev-guide/plugin-api/strategy","draft":false,"unlisted":false,"editUrl":"https://github.com/polocto/FolderFlow/tree/main/docs/versioned_docs/version-0.2.0/dev-guide/plugin-api/strategy.md","tags":[],"version":"0.2.0","sidebarPosition":6,"frontMatter":{"title":"Strategies","sidebar_position":6},"sidebar":"developperSideBar","previous":{"title":"Filters","permalink":"/FolderFlow/0.2.0/dev-guide/plugin-api/filter"},"next":{"title":"Testing","permalink":"/FolderFlow/0.2.0/dev-guide/testing"}}');var r=i(4848),s=i(8453);const o={title:"Strategies",sidebar_position:6},a="Strategies",l={},d=[{value:"How strategies work",id:"how-strategies-work",level:2},{value:"Built-in strategies",id:"built-in-strategies",level:2},{value:"Writing custom strategies",id:"writing-custom-strategies",level:2},{value:"Strategy Template",id:"strategy-template",level:2},{value:"Import package for build",id:"import-package-for-build",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"strategies",children:"Strategies"})}),"\n",(0,r.jsx)(t.p,{children:"Strategies define how destination directory paths are computed for files."}),"\n",(0,r.jsx)(t.p,{children:"They do not move files or create directories. They only compute paths."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"how-strategies-work",children:"How strategies work"}),"\n",(0,r.jsx)(t.p,{children:"For each accepted file:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"FolderFlow invokes the configured strategy"}),"\n",(0,r.jsx)(t.li,{children:"The strategy computes a destination directory"}),"\n",(0,r.jsx)(t.li,{children:"FolderFlow applies filesystem operations separately"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Strategies must be deterministic and safe."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"built-in-strategies",children:"Built-in strategies"}),"\n",(0,r.jsx)(t.p,{children:"FolderFlow provides the following built-in strategies:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"dirchain"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Each strategy is documented in its own page."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"writing-custom-strategies",children:"Writing custom strategies"}),"\n",(0,r.jsx)(t.p,{children:"Custom strategies:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Implement the Strategy interface"}),"\n",(0,r.jsx)(t.li,{children:"Receive configuration via YAML"}),"\n",(0,r.jsx)(t.li,{children:"Must never touch the filesystem"}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"strategy-template",children:"Strategy Template"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package mystrategy\n\nimport (\n    "io/fs"\n    "github.com/polocto/FolderFlow/pkg/ffplugin/strategy"\n)\n\ntype MyStrategy struct {\n    // configuration fields\n}\n\nfunc (s *MyStrategy) Selector() string {\n    return "my-strategy"\n}\n\nfunc (s *MyStrategy) LoadConfig(config map[string]interface{}) error {\n    // parse and validate config\n    return nil\n}\n\nfunc (s *MyStrategy) FinalDirPath(\n    srcDir, destDir, filePath string,\n    info fs.FileInfo,\n) (string, error) {\n    // compute destination directory\n    return destDir, nil\n}\n\nfunc init() {\n    strategy.RegisterStrategy("my-strategy", func() strategy.Strategy {\n        return &MyStrategy{}\n    })\n}\n\n'})}),"\n",(0,r.jsx)(t.h2,{id:"import-package-for-build",children:"Import package for build"}),"\n",(0,r.jsxs)(t.p,{children:["Force import in ",(0,r.jsx)(t.code,{children:"main.go"})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'import _ "github.com/yourorg/folderflow/plugins/mystrategy"\n'})})]})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,t,i){i.d(t,{R:()=>o,x:()=>a});var n=i(6540);const r={},s=n.createContext(r);function o(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);
"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6431],{85(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"dev-guide/plugin-api/index","title":"Plugin API","description":"FolderFlow is designed around a plugin-based architecture.","source":"@site/docs/dev-guide/plugin-api/index.md","sourceDirName":"dev-guide/plugin-api","slug":"/dev-guide/plugin-api/","permalink":"/FolderFlow/dev-guide/plugin-api/","draft":false,"unlisted":false,"editUrl":"https://github.com/polocto/FolderFlow/tree/main/docs/docs/dev-guide/plugin-api/index.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Plugin API","sidebar_position":4},"sidebar":"developperSideBar","previous":{"title":"Setup","permalink":"/FolderFlow/dev-guide/setup"},"next":{"title":"API Reference","permalink":"/FolderFlow/dev-guide/plugin-api/api-reference"}}');var r=i(4848),s=i(8453);const t={title:"Plugin API",sidebar_position:4},d="Plugins",c={},a=[{value:"What is a plugin?",id:"what-is-a-plugin",level:2},{value:"Plugin types",id:"plugin-types",level:2},{value:"Filters",id:"filters",level:3},{value:"Strategies",id:"strategies",level:3},{value:"Plugin lifecycle",id:"plugin-lifecycle",level:2},{value:"Configuration model",id:"configuration-model",level:2},{value:"Design guarantees",id:"design-guarantees",level:2},{value:"Getting started",id:"getting-started",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"plugins",children:"Plugins"})}),"\n",(0,r.jsxs)(n.p,{children:["FolderFlow is designed around a ",(0,r.jsx)(n.strong,{children:"plugin-based architecture"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Plugins allow you to extend or customize FolderFlow\u2019s behavior without modifying the core engine. They encapsulate well-defined logic and participate in the file processing pipeline in a safe and deterministic way."}),"\n",(0,r.jsx)(n.p,{children:"This section explains how plugins work, what types exist, and how to start writing your own."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"what-is-a-plugin",children:"What is a plugin?"}),"\n",(0,r.jsx)(n.p,{children:"A plugin is a Go component that:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implements a public FolderFlow interface"}),"\n",(0,r.jsx)(n.li,{children:"Is registered under a unique selector name"}),"\n",(0,r.jsx)(n.li,{children:"Receives configuration from the YAML file"}),"\n",(0,r.jsx)(n.li,{children:"Is loaded once at startup and reused throughout execution"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Plugins are ",(0,r.jsx)(n.strong,{children:"not dynamically loaded"})," at runtime. They are compiled into the binary and explicitly registered."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"plugin-types",children:"Plugin types"}),"\n",(0,r.jsx)(n.p,{children:"FolderFlow currently supports two plugin types."}),"\n",(0,r.jsx)(n.h3,{id:"filters",children:"Filters"}),"\n",(0,r.jsxs)(n.p,{children:["Filters decide ",(0,r.jsx)(n.strong,{children:"whether a file should be routed to a destination"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"They:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Inspect file paths and metadata"}),"\n",(0,r.jsx)(n.li,{children:"Return a match decision"}),"\n",(0,r.jsx)(n.li,{children:"Do not modify files or directories"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Typical use cases:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Filter by extension"}),"\n",(0,r.jsx)(n.li,{children:"Filter by filename or pattern"}),"\n",(0,r.jsx)(n.li,{children:"Filter by size or attributes"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcd8 See: ",(0,r.jsx)(n.a,{href:"/FolderFlow/dev-guide/plugin-api/api-reference#filter-interface",children:(0,r.jsx)(n.strong,{children:"API Reference \u2192 Filter Interface"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"strategies",children:"Strategies"}),"\n",(0,r.jsxs)(n.p,{children:["Strategies decide ",(0,r.jsx)(n.strong,{children:"how destination paths are computed"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"They:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Compute a directory path for each file"}),"\n",(0,r.jsx)(n.li,{children:"Preserve or reshape directory hierarchies"}),"\n",(0,r.jsx)(n.li,{children:"Never interact with the filesystem"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Typical use cases:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Preserve source directory structure"}),"\n",(0,r.jsx)(n.li,{children:"Group files by date"}),"\n",(0,r.jsx)(n.li,{children:"Flatten directory trees"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcd8 See: ",(0,r.jsx)(n.a,{href:"/FolderFlow/dev-guide/plugin-api/api-reference#strategy-interface",children:(0,r.jsx)(n.strong,{children:"API Reference \u2192 Strategy Interface"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"plugin-lifecycle",children:"Plugin lifecycle"}),"\n",(0,r.jsx)(n.p,{children:"Plugins follow a simple and strict lifecycle:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Registered during program initialization"}),"\n",(0,r.jsx)(n.li,{children:"Instantiated when referenced in configuration"}),"\n",(0,r.jsx)(n.li,{children:"Configured and validated at startup"}),"\n",(0,r.jsx)(n.li,{children:"Used repeatedly during file processing"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"After configuration:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Plugins must be immutable"}),"\n",(0,r.jsx)(n.li,{children:"Plugins must be safe for concurrent use"}),"\n",(0,r.jsx)(n.li,{children:"Errors during configuration abort startup"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"configuration-model",children:"Configuration model"}),"\n",(0,r.jsx)(n.p,{children:"Plugins are selected in the YAML configuration by name."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'filters:\n  - name: extensions\n    config:\n      extensions: [".jpg", ".png"]\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"type"})," field selects the plugin"]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"config"})," block is interpreted by the plugin itself"]}),"\n",(0,r.jsx)(n.li,{children:"Invalid configuration results in startup failure"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Each plugin defines its own configuration schema."}),"\n",(0,r.jsx)(n.h2,{id:"design-guarantees",children:"Design guarantees"}),"\n",(0,r.jsx)(n.p,{children:"All plugins must respect the following guarantees:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No filesystem mutation"}),"\n",(0,r.jsx)(n.li,{children:"Deterministic behavior"}),"\n",(0,r.jsx)(n.li,{children:"No global state changes"}),"\n",(0,r.jsx)(n.li,{children:"Safe path handling"}),"\n",(0,r.jsx)(n.li,{children:"Clear and descriptive errors"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"These rules are enforced by convention and testing."}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcd8 See: ",(0,r.jsx)(n.a,{href:"/FolderFlow/dev-guide/plugin-api/best-practices",children:"Best Practices"})]}),"\n",(0,r.jsx)(n.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,r.jsx)(n.p,{children:"If you want to write your own plugin:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Read the API Reference"}),"\n",(0,r.jsx)(n.li,{children:"Follow the Plugin Template"}),"\n",(0,r.jsx)(n.li,{children:"Apply the Best Practices"}),"\n",(0,r.jsx)(n.li,{children:"Write unit tests for edge cases"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>d});var l=i(6540);const r={},s=l.createContext(r);function t(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);